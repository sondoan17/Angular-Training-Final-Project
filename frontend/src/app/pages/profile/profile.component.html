<div
  class="bg-gray-100 dark:bg-gray-900 min-h-screen p-4 sm:p-6 lg:p-8 transition-colors duration-300"
>
  <div
    *ngIf="isLoadingProfile"
    class="flex justify-center items-center min-h-[calc(100vh-64px)]"
  >
    <mat-spinner diameter="40"></mat-spinner>
  </div>
  <div *ngIf="!isLoadingProfile" class="container mx-auto px-4 py-8">
    <div class="max-w-7xl mx-auto">
      <button
        mat-button
        routerLink="/dashboard"
        class="mb-4 flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"
      >
        <mat-icon class="mr-2">arrow_back</mat-icon> Back to Dashboard
      </button>

      <div
        class="p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md transition-colors duration-300"
      >
        <h2
          class="text-2xl font-semibold mb-6 text-gray-800 dark:text-gray-200"
        >
          Profile Settings
        </h2>

        <!-- Profile Header -->
        <div
          class="px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700"
        >
          <div class="flex items-center space-x-5">
            <div class="flex-shrink-0">
              <img
                class="h-20 w-20 rounded-full ring-4 ring-white dark:ring-gray-700"
                [src]="
                  'https://ui-avatars.com/api/?name=' +
                  username +
                  '&background=random&size=80'
                "
                [alt]="username"
              />
            </div>
            <div class="flex-1 min-w-0">
              <h2
                class="text-2xl font-bold leading-7 text-gray-900 dark:text-gray-100 sm:text-3xl sm:truncate"
              >
                {{ name || username }}
              </h2>
              <p class="text-sm text-gray-500 dark:text-gray-400">
                {{ "@" + username }}
              </p>
            </div>
          </div>
        </div>

        <!-- Profile Form -->
        <form
          (ngSubmit)="onSubmit()"
          #profileForm="ngForm"
          class="divide-y divide-gray-200 dark:divide-gray-700"
        >
          <!-- Basic Information -->
          <div class="px-4 py-5 sm:p-6">
            <div class="space-y-6">
              <h3
                class="text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"
              >
                Basic Information
              </h3>

              <!-- Username -->
              <mat-form-field appearance="fill" class="w-full">
                <mat-label>Username</mat-label>
                <input matInput [value]="username" readonly />
                <mat-icon matSuffix>person</mat-icon>
                <mat-hint class="text-red-500"
                  >Username cannot be changed</mat-hint
                >
              </mat-form-field>

              <!-- Name -->
              <mat-form-field appearance="fill" class="w-full">
                <mat-label>Full Name</mat-label>
                <input
                  matInput
                  [(ngModel)]="name"
                  name="name"
                  placeholder="Your full name"
                />
                <mat-icon matSuffix>badge</mat-icon>
              </mat-form-field>

              <!-- Email -->
              <mat-form-field appearance="fill" class="w-full">
                <mat-label>Email Address</mat-label>
                <input
                  matInput
                  [(ngModel)]="email"
                  name="email"
                  type="email"
                  placeholder="your.email@example.com"
                />
                <mat-icon matSuffix>email</mat-icon>
              </mat-form-field>

              <!-- Birth Date -->
              <mat-form-field appearance="fill" class="w-full">
                <mat-label>Birth Date</mat-label>
                <input
                  matInput
                  [matDatepicker]="picker"
                  [(ngModel)]="birthDate"
                  name="birthDate"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
            </div>
          </div>

          <!-- Social Media Links -->
          <div class="px-4 py-5 sm:p-6">
            <div class="space-y-6">
              <h3
                class="text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"
              >
                Social Media Links
              </h3>
              <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <!-- Twitter -->
                <mat-form-field appearance="fill" class="w-full">
                  <mat-label>Twitter</mat-label>
                  <input
                    matInput
                    [(ngModel)]="socialMedia.twitter"
                    name="twitter"
                    placeholder="Twitter profile URL"
                  />
                  <mat-icon matSuffix>link</mat-icon>
                </mat-form-field>

                <!-- Instagram -->
                <mat-form-field appearance="fill" class="w-full">
                  <mat-label>Instagram</mat-label>
                  <input
                    matInput
                    [(ngModel)]="socialMedia.instagram"
                    name="instagram"
                    placeholder="Instagram profile URL"
                  />
                  <mat-icon matSuffix>link</mat-icon>
                </mat-form-field>

                <!-- LinkedIn -->
                <mat-form-field appearance="fill" class="w-full">
                  <mat-label>LinkedIn</mat-label>
                  <input
                    matInput
                    [(ngModel)]="socialMedia.linkedin"
                    name="linkedin"
                    placeholder="LinkedIn profile URL"
                  />
                  <mat-icon matSuffix>link</mat-icon>
                </mat-form-field>

                <!-- GitHub -->
                <mat-form-field appearance="fill" class="w-full">
                  <mat-label>GitHub</mat-label>
                  <input
                    matInput
                    [(ngModel)]="socialMedia.github"
                    name="github"
                    placeholder="GitHub profile URL"
                  />
                  <mat-icon matSuffix>link</mat-icon>
                </mat-form-field>
              </div>
            </div>
          </div>

          <!-- Save Button -->
          <div class="px-4 py-3 bg-gray-50 dark:bg-gray-800 text-right sm:px-6">
            <button
              mat-raised-button
              color="primary"
              type="submit"
              [disabled]="isLoading"
              class="inline-flex items-center"
            >
              <mat-icon *ngIf="!isLoading">save</mat-icon>
              <mat-spinner
                *ngIf="isLoading"
                diameter="20"
                class="mr-2"
              ></mat-spinner>
              {{ isLoading ? "Saving..." : "Save Changes" }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
